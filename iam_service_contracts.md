## üîê gRPC –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã IAM: `auth.v1` –∏ `user.v1`

–ù–∞–±–æ—Ä —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏. –î–≤–∞ gRPC —Å–µ—Ä–≤–∏—Å–∞: `AuthService` (–ø–∞–∫–µ—Ç `auth.v1`) –∏ `UserService` (–ø–∞–∫–µ—Ç `user.v1`). –û–±—â–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –ø–∞–∫–µ—Ç `common.v1`.

---

### –°–µ—Ä–≤–∏—Å: AuthService (`auth.v1`)

–ú–µ—Ç–æ–¥—ã:

1) Login(LoginRequest) ‚Üí LoginResponse

LoginRequest

| –ü–æ–ª–µ   | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ            |
|--------|--------|---------------------|
| login  | string | –õ–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  |
| password | string | –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

LoginResponse

| –ü–æ–ª–µ         | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                 |
|--------------|--------|--------------------------|
| session_uuid | string | UUID –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏     |

2) Whoami(WhoamiRequest) ‚Üí WhoamiResponse

WhoamiRequest

| –ü–æ–ª–µ         | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                 |
|--------------|--------|--------------------------|
| session_uuid | string | UUID –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏     |

WhoamiResponse

| –ü–æ–ª–µ    | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|---------|--------------------|-----------------------------------|
| session | common.v1.Session  | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏       |
| user    | common.v1.User     | –í–ª–∞–¥–µ–ª–µ—Ü —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏           |

---

### –°–µ—Ä–≤–∏—Å: UserService (`user.v1`)

–ú–µ—Ç–æ–¥—ã:

1) Register(RegisterRequest) ‚Üí RegisterResponse

UserRegistrationInfo

| –ü–æ–ª–µ  | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                       |
|-------|--------------------|--------------------------------|
| info  | common.v1.UserInfo | –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| password | string          | –ü–∞—Ä–æ–ª—å                         |

RegisterRequest

| –ü–æ–ª–µ | –¢–∏–ø                    | –û–ø–∏—Å–∞–Ω–∏–µ                 |
|------|------------------------|--------------------------|
| info | UserRegistrationInfo   | –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏   |

RegisterResponse

| –ü–æ–ª–µ      | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                         |
|-----------|--------|----------------------------------|
| user_uuid | string | UUID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è     |

2) GetUser(GetUserRequest) ‚Üí GetUserResponse

GetUserRequest

| –ü–æ–ª–µ      | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ               |
|-----------|--------|------------------------|
| user_uuid | string | UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è      |

GetUserResponse

| –ü–æ–ª–µ | –¢–∏–ø            | –û–ø–∏—Å–∞–Ω–∏–µ        |
|------|----------------|-----------------|
| user | common.v1.User | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å    |

---

### –û–±—â–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (`common.v1`)

Session

| –ü–æ–ª–µ       | –¢–∏–ø                         | –û–ø–∏—Å–∞–Ω–∏–µ                               |
|------------|-----------------------------|----------------------------------------|
| uuid       | string                      | UUID —Å–µ—Å—Å–∏–∏                            |
| created_at | google.protobuf.Timestamp   | –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è                         |
| updated_at | google.protobuf.Timestamp   | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è            |
| expires_at | google.protobuf.Timestamp   | –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è                        |

NotificationMethod

| –ü–æ–ª–µ          | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                                           |
|---------------|--------|----------------------------------------------------|
| provider_name | string | –ü—Ä–æ–≤–∞–π–¥–µ—Ä: `telegram`, `email`, `push` –∏ —Ç.–¥.     |
| target        | string | –ê–¥—Ä–µ—Å/–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (email, —á–∞—Ç-id)     |

UserInfo

| –ü–æ–ª–µ                 | –¢–∏–ø                      | –û–ø–∏—Å–∞–Ω–∏–µ                     |
|----------------------|--------------------------|------------------------------|
| login                | string                   | –õ–æ–≥–∏–Ω                        |
| email                | string                   | Email                        |
| notification_methods | []NotificationMethod     | –ö–∞–Ω–∞–ª—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π           |

User

| –ü–æ–ª–µ       | –¢–∏–ø              | –û–ø–∏—Å–∞–Ω–∏–µ                   |
|------------|------------------|----------------------------|
| uuid       | string           | UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è          |
| info       | UserInfo         | –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è         |
| created_at | google.protobuf.Timestamp | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è    |
| updated_at | google.protobuf.Timestamp | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è  |

